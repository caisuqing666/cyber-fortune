// 类型定义
export interface Option {
  text: string;
  score: number;
}

export interface Question {
  id: number;
  question: string;
  options: Option[];
}

// 页面状态类型
export type PageState = "entry" | "question" | "loading" | "result" | "share" | "exit";

// 结果数据类型
export interface ResultData {
  type: ResultType;
  judgement: string;
  scene: string;
  comfort: string;
  tag: string;
}

// 问题数据
export const questions: Question[] = [
  {
    id: 1,
    question: "早上被闹钟叫醒那一刻，你的内心OS是？",
    options: [
      { text: "又是新的一天，我还能行（大概）", score: 0 },
      { text: "睡了但好像没睡，充电2小时通话5分钟", score: 1 },
      { text: "我明明刚闭眼，怎么就天亮了？", score: 2 },
    ],
  },
  {
    id: 2,
    question: "最近你干活的真实状态？",
    options: [
      { text: "有在做事，偶尔还能收到点赞", score: 0 },
      { text: "忙但不知道在忙什么，像无头苍蝇", score: 1 },
      { text: "努力了但没结果，像在给空气打工", score: 2 },
    ],
  },
  {
    id: 3,
    question: "如果用一句话形容现在的你？",
    options: [
      { text: "还能卷，但不想卷了", score: 0 },
      { text: "表面OK，内心在发疯", score: 1 },
      { text: "电量1%，但还在硬撑", score: 2 },
    ],
  },
];

// 结果类型定义
export type ResultType = "hidden_drain" | "recovery" | "transition";

// 根据分数获取结果类型
export function getResultType(score: number): ResultType {
  if (score <= 2) return "hidden_drain";
  if (score <= 4) return "recovery";
  return "transition";
}

// 判词库
export const fortuneData = {
  hidden_drain: {
    name: "电子宠物型打工人",
    coreVibe: "表面活着，实际在待机。",
    scoreRange: "0-2",
    judgements: [
      "班味入脑症候群",
      "精神已离职但肉身还在打卡",
      "社畜中的战斗畜",
      "情绪ICU常住用户",
      "电量显示1%但还在开机",
      "人形AI但没关机键",
      "假装人类计划执行中",
    ],
    scenes: [
      "你现在的状态：肉身在上班，灵魂在摸鱼，钱包在哭泣，脑子在放空。",
      "你不是累了，你是被生活PUA到电量耗尽，但还在插着充电宝硬撑。",
      "你已经累到开始倒计时「还有X天到周末」，像在等待刑满释放。",
      "你的精神状态，就像手机只剩1%电量还开着5G刷视频——很危险但还在作死。",
      "表面看你在认真工作，实际上你已经在脑内完成了一百种辞职方案。",
      "你最近的努力，像在给黑洞投简历——投了但永远不会被看到。",
      "你没摆烂，你只是把「硬撑」调成了自动模式，忘记怎么关。",
      "看起来你在做事，实际上你的大脑已经在播放「我想静静」的单曲循环。",
      "你就像那个「稍后提醒」的闹钟——设置了但永远不会响，因为你也懒得理。",
      "你以为自己在休息，其实只是从「加班内耗」切换到了「躺平内耗」。",
    ],
    comforts: [
      "不是你太菜，是这个游戏难度设置有问题。",
      "你不是玻璃心，是这个世界的恶意浓度超标了。",
      "你的身体在疯狂报警，但你的大脑还在装死——该重启了。",
      "你不是不能吃苦，是这苦吃得不值——像花大钱买过期食品。",
      "累了就是累了，不需要证明自己「够惨」才有资格休息。",
    ],
    tags: [
      "当代赛博牛马",
      "精神状态：已读不回",
      "人间清醒但钱包不清醒",
      "需要一个长假而不是调休",
      "带薪发疯中，老板勿扰",
    ],
  },
  recovery: {
    name: "重启加载中",
    coreVibe: "系统修复中，请勿断电。",
    scoreRange: "3-4",
    judgements: [
      "摆烂后遗症恢复期",
      "低谷VIP会员即将到期",
      "想卷但还差一个理由",
      "能量条：从1%充到30%",
      "开始不甘心做废物了",
      "躺平失败，正在重新开机",
      "灵魂重新连接服务器",
    ],
    scenes: [
      "你现在的状态：还没完全好，但已经开始嫌弃那个「摆烂的自己」了。",
      "你开始有点想做事了，但你的身体还在抗议：「让我再躺5分钟」。",
      "好消息：你不想继续emo了。坏消息：你也不知道该干嘛，像迷路的导航。",
      "你现在像手机充到30%——能开机了，但不敢开太多APP，怕又关机。",
      "你已经在翻以前立的flag了，虽然知道大概率会打脸，但至少开始想了。",
      "你开始有「下周我要xxx」的想法了，离真正行动还差99个借口。",
      "你现在的状态是：躺着嫌废，坐起来又不知道干嘛，像卡在加载界面。",
      "你开始看不惯自己的颓废了——这是好事，说明你的上进心还在线。",
      "你还没完全恢复，但已经开始嫌弃那个「摆烂的自己」，像在清理垃圾文件。",
      "你不再觉得「摆烂」是正确答案，只是暂时还没找到「努力」的打开方式。",
    ],
    comforts: [
      "能开始嫌弃自己，说明你的系统在自动修复了。",
      "你不是三分钟热度，你只是需要时间找到「适合的姿势」重新开始。",
      "从1%充到30%也是进步，不用急着充到100%，会爆炸的。",
      "好起来像心电图，有起伏很正常，又不是死了，平直才可怕。",
      "至少你现在比那个「彻底摆烂」的自己强了，这就是进步。",
    ],
    tags: [
      "谷底待久了开始想爬坡",
      "系统重启中，请稍候",
      "想卷但还没找到卷的方向",
      "emo会员即将过期",
      "开始想搞钱但还没搞到",
    ],
  },
  transition: {
    name: "版本更新中",
    coreVibe: "旧版已停服，新版加载中。",
    scoreRange: "5-6",
    judgements: [
      "人生正在切换服务器",
      "旧号封了，新号在申请中",
      "上一集已完结，下一集待播",
      "系统大更新，请耐心等待",
      "重置进度：60%",
      "老天爷在给你换剧本",
      "前方大改造，暂时封路",
    ],
    scenes: [
      "你现在的状态：旧的生活看不上，新的还没来，卡在中间像网卡。",
      "你发现自己很多「以前的习惯」都不顺眼了，但新习惯还没养成，像换手机后的适应期。",
      "你最近的烦躁，不是因为变差了，是因为你已经「不能忍受将就」了——这是进步。",
      "你正在经历的不是崩溃，是旧版本被强制下架，新版本正在下载——虽然很慢。",
      "你现在像一个正在装修的房子——很乱很吵，但装修完会更好，只是现在很痛苦。",
      "你对「凑合」开始过敏了，这是从「将就」升级到「讲究」的前兆。",
      "你不是焦虑，你是被困在「新旧交替」的加载界面——进度条走得很慢，但确实在走。",
      "你现在最大的问题是：回不去旧版本了，但新版本还没装好——卡在中间很尴尬。",
      "所有的纠结和烦躁，都在告诉你一件事——你已经不满足现状，想要更好的了。",
      "你不是选择困难，是选项终于比以前多了——从「没得选」到「不知道选哪个」，这是进步。",
    ],
    comforts: [
      "乱是正常的，你正在从「能忍」升级到「不能忍」——这是好事。",
      "你不是作，你是从「将就」升级到「讲究」了——生活质量提升了。",
      "破旧才能立新，你现在在「破旧」阶段，虽然痛苦，但「立新」就在后面。",
      "这种烦躁，叫「已经看不上现在的自己」——说明你眼光高了，要求也高了。",
      "旧的不去新的不来——你现在在「去旧」阶段，虽然混乱，但新生活已经在路上了。",
    ],
    tags: [
      "旧版本卸载中，请勿断电",
      "老路走不通，新路在建设中",
      "人生2.0版本更新中",
      "好事发生前的混乱期",
      "此时退出将丢失进度，请坚持",
    ],
  },
};

// 加载页文案
export const loadingTexts = [
  { progress: 0, text: "正在扫描你的精神状态..." },
  { progress: 25, text: "排除「你太矫情」的可能性..." },
  { progress: 60, text: "确认是生活的锅，不是你的..." },
  { progress: 100, text: "诊断完毕，准备开骂" },
];

// 随机选择函数
export function randomPick<T>(arr: T[]): T {
  return arr[Math.floor(Math.random() * arr.length)];
}
